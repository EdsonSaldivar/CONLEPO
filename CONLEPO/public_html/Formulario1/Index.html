<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="shortcut icon" href="../../images/liconsa_logo.jpeg" type="image/x-icon">
    <title>Formulario de Captura</title>
</head>
<body>

<h2>Formulario de Captura</h2>

<form action="#" method="post"> <!-- Falta colocar el codigo de BASE DE DATOS -->

    <!-- Datos generales -->
    <label for="numeroContrato">Número de Contrato:</label>
    <input type="text" id="numeroContrato" name="numeroContrato" required style="text-transform:uppercase;"><br>

    <label for="nombreEmpresa">Nombre de la Empresa Adjudicada:</label>
    <input type="text" id="nombreEmpresa" name="nombreEmpresa" required><br>

    <label for="tipoLeche">Tipo de Leche:</label>
    <input type="text" id="tipoLeche" name="tipoLeche" required><br>

    <label for="tipoContrato">Tipo de Contrato:</label>
    <select id="tipoContrato" name="tipoContrato" required onchange="mostrarOpciones()">
        <option value="" disabled selected>Selecciona el tipo de contrato</option>
        <option value="ABIERTO">ABIERTO</option>
        <option value="CERRADO">CERRADO</option>
    </select><br>

    <!-- Opciones para contrato ABIERTO -->
    <div id="contratoAbierto" style="display:none;">
        <label for="volumenMaximo">Volumen Máximo:</label>
        <input type="text" id="volumenMaximo" name="volumenMaximo"><br>

        <label for="volumenMinimo">Volumen Mínimo:</label>
        <input type="text" id="volumenMinimo" name="volumenMinimo"><br>

        <label for="cantidadSacos">Cantidad en Sacos de 25kgs:</label>
        <input type="number" id="cantidadSacos" name="cantidadSacos" min="0"><br>
    </div>

    <!-- Opciones para contrato CERRADO -->
    <div id="contratoCerrado" style="display:none;">
        <div class="range-container">
            <label for="porcentajeContratado">Porcentaje del Volumen Contratado:</label>
            <input type="range" id="porcentajeContratado" name="porcentajeContratado" min="0" max="20" step="1" value="0" oninput="updateOutput()">
            <output for="porcentajeContratado">0%</output>
        </div>

        <label for="cantidadSacosCerrado">Cantidad en Sacos de 25kgs:</label>
        <input type="number" id="cantidadSacosCerrado" name="cantidadSacosCerrado" min="0"><br>
    </div>

    <!-- Campos del Centro de Trabajo -->
    <div id="CamposCT">
        <div id="nombresCamposCT">
            <label for="centroTrabajo">Centro de Trabajo:</label>
            <label for="periodo">Periodo:</label>
            <label for="cantidadNuevo">Cantidad:</label>
        </div>

        <div id="valoresCamposCT">
            <select id="centroTrabajo" name="centroTrabajo" required>
                <option value="" disabled selected>Selecciona el centro de trabajo</option>
                <option value="1">GERENCIA ESTATAL JALISCO</option>
                <option value="2">GERENCIA ESTATAL QUERETARO</option>
                <option value="3">GERENCIA METROPOLITANA SUR</option>
            </select><br>

            <select id="periodo" name="periodo" required>
                <option value="" disabled selected>Selecciona el periodo</option>
                <option value="1">ENERO</option>
                <option value="2">FEBRERO</option>
                <option value="3">MARZO</option>
            </select><br>

            <input type="number" id="cantidadNuevo" name="cantidadNuevo" min="0" required><br>

            <button type="button" id="btnAgregar" onclick="duplicarCampos()">+</button>
        </div>
    </div>

    <!-- Datos finales -->
    <label for="fechaVigencia">Fecha de Vigencia del Contrato:</label>
    <input type="date" id="fechaVigencia" name="fechaVigencia" required><br>

    <label for="precioKg">Precio por Kg:</label>
    <input type="number" id="precioKg" name="precioKg" step="0.01" min="0" required><br>

    <input type="submit" value="Enviar">
</form>

<script>
    function mostrarOpciones() {
        var tipoContrato = document.getElementById("tipoContrato").value;
        var contratoAbierto = document.getElementById("contratoAbierto");
        var contratoCerrado = document.getElementById("contratoCerrado");

        if (tipoContrato === "ABIERTO") {
            contratoAbierto.style.display = "block";
            contratoCerrado.style.display = "none";
        } else if (tipoContrato === "CERRADO") {
            contratoAbierto.style.display = "none";
            contratoCerrado.style.display = "block";
        }
    }
</script>

<script>
    function updateOutput() {
        var porcentajeContratado = document.getElementById("porcentajeContratado");
        var output = document.querySelector("output[for='porcentajeContratado']");
        output.textContent = porcentajeContratado.value + "%";
    }
</script>

<script>
    function duplicarCampos() {
    // Clonar el div nuevosCampos
    var CamposClone = document.getElementById("valoresCamposCT").cloneNode(true);

    // Limpiar los valores de los campos clonados
    var inputs = CamposClone.querySelectorAll('input, select');
    inputs.forEach(function (input) {
        input.value = '';
    });

    // Insertar el clon debajo del original
    document.getElementById("CamposCT").appendChild(CamposClone);
}
</script>

</body>
</html>
